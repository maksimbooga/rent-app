# Интерактивная карта с MapLibre GL JS

Это React приложение демонстрирует работу с картами и полигонами зданий с использованием MapLibre GL JS и Tailwind CSS.

## Возможности

- **Интерактивная карта зданий**: Кликните на здание для получения информации
- **Подсветка выбранного полигона**: Выбранное здание подсвечивается красным цветом
- **Демонстрация проблем с полигонами**: Отдельный режим для показа трудностей работы с полигонами
- **Современный UI**: Красивый интерфейс с использованием Tailwind CSS

## Трудности работы с полигонами

### 1. Сложность определения клика внутри полигона
- Проблемы с точным определением точки клика внутри сложных полигонов
- Трудности с обработкой полигонов с отверстиями
- Проблемы с производительностью при большом количестве полигонов

### 2. Проблемы с производительностью
- Медленная отрисовка при большом количестве полигонов
- Проблемы с памятью при работе с сложными геометриями
- Трудности с оптимизацией рендеринга

### 3. Сложности с отображением
- Проблемы с z-index и перекрытием слоев
- Трудности с отображением сложных многоугольников
- Проблемы с самопересекающимися полигонами

### 4. Проблемы с данными
- Сложность обработки полигонов с отверстиями
- Трудности с валидацией геометрии
- Проблемы с импортом данных из различных источников

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm start
```

## Технологии

- **React 18** с TypeScript
- **MapLibre GL JS** для работы с картами
- **Tailwind CSS** для стилизации
- **OpenStreetMap** как источник тайлов карты

## Структура проекта

```
src/
├── components/
│   ├── Map.tsx              # Основной компонент карты
│   ├── PolygonIssues.tsx    # Демонстрация проблем с полигонами
│   └── MapSwitcher.tsx      # Переключатель между режимами
├── App.tsx                  # Главный компонент
└── index.css               # Стили Tailwind CSS
```

## Использование

1. Запустите приложение командой `npm start`
2. Откроется браузер с интерактивной картой
3. Кликните на здание для получения информации
4. Используйте переключатель вверху для перехода к демонстрации проблем

## Источники данных

В данном примере используются синтетические данные зданий в формате GeoJSON. В реальном проекте можно подключить:

- OpenStreetMap API
- Геосервисы (Google Maps, Yandex Maps)
- Собственные API с данными о зданиях
- Базы данных с геометрией зданий

## Решения проблем с полигонами

### 1. Оптимизация производительности
- Использование кластеризации для больших наборов данных
- Применение пространственных индексов
- Оптимизация геометрии полигонов

### 2. Улучшение точности кликов
- Использование буферизации для увеличения области клика
- Применение алгоритмов point-in-polygon
- Оптимизация обработчиков событий

### 3. Работа со сложными полигонами
- Валидация геометрии перед отображением
- Использование специализированных библиотек (turf.js)
- Применение алгоритмов упрощения полигонов
